{"version":3,"sources":["webpack:///./src/views/mainLeftHomes/LeftMyPic.vue?12fe","webpack:///./src/views/mainLeftHomes/LeftMyPic.vue?a2e8","webpack:///src/views/mainLeftHomes/LeftMyPic.vue","webpack:///./src/views/mainLeftHomes/LeftMyPic.vue?b820","webpack:///./src/views/mainLeftHomes/LeftMyPic.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","protrait","_v","_s","username","weiboHint","_e","ref","_l","item","key","imgId","uploadImg","on","$event","scalePic","staticRenderFns","name","data","showWeiboHintFlag","tempArr","myWeiboPics","rememberScroll","computed","mapState","weiboDataAll","methods","e","plugins","activated","temp","forEach","arr","window","usernameFromSession","Object","keys","JSON","protraitFromLocal","parse","localStorage","beforeRouteLeave","to","from","next","scrollY","component"],"mappings":"gHAAA,W,gECAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,IAAMP,EAAIQ,SAAS,IAAM,oBAAoBJ,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACN,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,eAAeP,EAAG,MAAM,CAACE,YAAY,cAAc,CAAEN,EAAqB,kBAAEI,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACN,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIY,WAAW,OAAOZ,EAAIa,KAAKT,EAAG,MAAM,CAACU,IAAI,gBAAgBR,YAAY,mBAAmBN,EAAIe,GAAIf,EAAe,aAAE,SAASgB,GAAM,OAAOZ,EAAG,MAAM,CAACa,IAAID,EAAKE,MAAMZ,YAAY,uBAAuB,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,IAAMS,EAAKG,UAAU,IAAM,eAAe,YAAa,GAAMH,EAAY,SAAII,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOrB,EAAIsB,SAASD,YAAgB,UACn2BE,EAAkB,G,8ECmCP,GACbC,KAAMA,YACNC,KAFF,WAGI,MAAO,CACLd,SAAUA,GACVH,SAAUA,GACVI,UAAWA,iBACXc,mBAAmBA,EACnBC,QAASA,GACTC,YAAaA,GACbC,eAAgBA,IAGpBC,SAAUA,kBACZC,gBAAIC,aAAJA,YAAA,kCAEEC,QAASA,CACPX,SADJ,SACAY,GACMC,OAAQA,SAASA,KAGrBC,UArBF,WAqBA,WAGA,0BACA,YAAM,OAAN,4BAGQC,GACFpC,KAAK2B,YAAc,GACnB3B,KAAKyB,mBAAoB,IAMzBzB,KAAK0B,QAAU,GACf1B,KAAK2B,YAAc,GAEnB3B,KAAK+B,aAAaM,SAAQ,SAAhC,SAEA,KACQtB,EAAKA,SAASA,aAAaA,SAAQA,SAA3CA,GACUuB,EAAIA,KAAKA,OAGnB,gCAGMtC,KAAK2B,YAAc3B,KAAK0B,QAExB1B,KAAKyB,mBAAoB,GAI3Bc,OAAOA,SAASA,EAAGA,KAAKA,gBAExB,IAAIC,EAAsBC,OAAOC,KACrCC,4CACA,GACQC,EAAoBD,KAAKE,MACjCC,yBACAvC,SACIP,KAAKU,SAAW8B,EAChBxC,KAAKO,SAAWqC,GAGlBG,iBAnEF,SAmEAC,EAAAC,EAAAC,GACIlD,KAAK4B,eAAiBW,OAAOY,QAC7BD,MCzG8V,I,wBCQ9VE,EAAY,eACd,EACAtD,EACAwB,GACA,EACA,KACA,WACA,MAIa,aAAA8B,E","file":"js/chunk-29ff2d8e.e9db7705.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeftMyPic.vue?vue&type=style&index=0&id=6e8e749b&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"leftmypic\"},[_c('div',{staticClass:\"mypic\"},[_c('div',{staticClass:\"mypic-header\"},[_c('div',{staticClass:\"mypic-header-protrait\"},[_c('img',{attrs:{\"src\":_vm.protrait,\"alt\":\"网络错误，无法显示图片！\"}})]),_c('div',{staticClass:\"mypic-header-username\"},[_vm._v(_vm._s(_vm.username))])]),_c('div',{staticClass:\"mypic-body\"},[(_vm.showWeiboHintFlag)?_c('div',{staticClass:\"mypic-body-p\"},[_vm._v(\" \"+_vm._s(_vm.weiboHint)+\" \")]):_vm._e(),_c('div',{ref:\"myPicBodyPics\",staticClass:\"mypic-body-pics\"},_vm._l((_vm.myWeiboPics),function(item){return _c('div',{key:item.imgId,staticClass:\"mypic-body-pics-num\"},[_c('img',{attrs:{\"src\":item.uploadImg,\"alt\":\"网络错误，无法显示图片！\",\"data-flag\":(\"\" + (item.imgFlag))},on:{\"click\":function($event){return _vm.scalePic($event)}}})])}),0)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"leftmypic\">\n    <div class=\"mypic\">\n      <div class=\"mypic-header\">\n        <div class=\"mypic-header-protrait\">\n          <img :src=\"protrait\" alt=\"网络错误，无法显示图片！\" />\n        </div>\n        <div class=\"mypic-header-username\">{{ username }}</div>\n      </div>\n      <div class=\"mypic-body\">\n        <div class=\"mypic-body-p\" v-if=\"showWeiboHintFlag\">\n          {{ weiboHint }}\n        </div>\n        <div class=\"mypic-body-pics\" ref=\"myPicBodyPics\">\n          <div\n            class=\"mypic-body-pics-num\"\n            v-for=\"item in myWeiboPics\"\n            :key=\"item.imgId\"\n          >\n            <img\n              :src=\"item.uploadImg\"\n              alt=\"网络错误，无法显示图片！\"\n              :data-flag=\"`${item.imgFlag}`\"\n              @click=\"scalePic($event)\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { plugins } from '@/api/plugins.js';\nimport { mapState } from 'vuex';\n\nexport default {\n  name: 'LeftMyPic',\n  data() {\n    return {\n      username: '',\n      protrait: '',\n      weiboHint: '还没有一张照片，快去发布吧！',\n      showWeiboHintFlag: false, // 是否显示微博提示（还没有图片 请发布）\n      tempArr: [], // 临时的arr 用来存放每一个发布微博里的图片\n      myWeiboPics: [], // 总的图片数据 把每一个发布的微博图片都整合到一起\n      rememberScroll: 0 // 记录滚动条位置\n    };\n  },\n  computed: {\n    ...mapState({ weiboDataAll: (state) => state.MYWEIBO.weiboDataAll })\n  },\n  methods: {\n    scalePic(e) {\n      plugins.scalePic(e);\n    }\n  },\n  activated() {\n    // // 获取微博里的所有图片整合到一个数组里\n    // 先判断weiboDataList里有没有提示信息\n    let temp = this.weiboDataAll.some(\n      (item) => item.dataList.firstFlag === true\n    );\n    // 如果有 说明还没有发布微博 是图片清空 显示微博提示\n    if (temp) {\n      this.myWeiboPics = [];\n      this.showWeiboHintFlag = true;\n    } else {\n      // 每次先把里面的数据先清空 再去查找图片 再去push图片\n      // 因为这个页面时keepAlive的所有每次activatd都会出发一次 所以每次必须先清空\n      // 如果不写在activated里 写在created 只有第一次出发 之后普通的路由切换不会出发\n      // 例如在LeftMyWeibo中删除一个包含图片微博的时候 按道理来说 页面切回来要更新 但没有 所以我们要把代码写在activated里\n      this.tempArr = [];\n      this.myWeiboPics = [];\n      // 如果没有 则整理里面的图片信息\n      this.weiboDataAll.forEach((item) => {\n        // 建立一个arr 把每一个微博的所有照片都放进去\n        let arr = [];\n        item.dataList.picsDataList.forEach((picsData) => {\n          arr.push(picsData);\n        });\n        // 再把每个微博整合\n        this.tempArr.push(...arr);\n      });\n      // 赋值给总的 myWeiboPics\n      this.myWeiboPics = this.tempArr;\n      // 不显示微博提示\n      this.showWeiboHintFlag = false;\n    }\n\n    // 返回页面时 回到之前滚动位置\n    window.scrollTo(0, this.rememberScroll);\n    // 获取用户名和头像\n    var usernameFromSession = Object.keys(\n      JSON.parse(JSON.stringify(sessionStorage))\n    )[0];\n    var protraitFromLocal = JSON.parse(\n      localStorage.getItem(usernameFromSession)\n    ).protrait;\n    this.username = usernameFromSession;\n    this.protrait = protraitFromLocal;\n  },\n  // 离开页面时记录下当前页面滚动位置\n  beforeRouteLeave(to, from, next) {\n    this.rememberScroll = window.scrollY;\n    next();\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.mypic {\n  display: flex;\n  flex-direction: column;\n  border: 1px solid #222;\n  border-radius: 8px;\n  background-color: #16161a;\n  .mypic-header {\n    display: flex;\n    align-items: center;\n    padding: 15px 25px;\n    .mypic-header-protrait {\n      width: 50px;\n      height: 50px;\n      border-radius: 50%;\n      overflow: hidden;\n      img {\n        display: inline-block;\n        width: 100%;\n        height: 100%;\n        background-color: #333;\n        border-radius: 50%;\n      }\n    }\n    .mypic-header-username {\n      padding-left: 10px;\n    }\n  }\n  .mypic-body {\n    padding: 10px 20px 60px 70px;\n\n    .mypic-body-p {\n      margin-bottom: 40px;\n      color: #eee;\n      font-size: 14px;\n    }\n\n    .mypic-body-pics {\n      display: flex;\n      flex-wrap: wrap;\n\n      .mypic-body-pics-num {\n        position: relative;\n        width: 150px;\n        height: 150px;\n        border-radius: 8px;\n        &:not(:nth-child(3n)) {\n          margin-right: 6px;\n        }\n        &:nth-child(n) {\n          margin-bottom: 6px;\n        }\n        img {\n          position: relative;\n          width: 100%;\n          height: 100%;\n          cursor: pointer;\n          border: 1px solid #333;\n          border-radius: 8px;\n        }\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeftMyPic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeftMyPic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LeftMyPic.vue?vue&type=template&id=6e8e749b&scoped=true&\"\nimport script from \"./LeftMyPic.vue?vue&type=script&lang=js&\"\nexport * from \"./LeftMyPic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LeftMyPic.vue?vue&type=style&index=0&id=6e8e749b&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6e8e749b\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
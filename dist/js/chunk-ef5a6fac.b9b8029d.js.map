{"version":3,"sources":["webpack:///./src/views/mainUpload/MainMiddleUpload.vue?c105","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///src/views/mainUpload/MainMiddleUpload.vue","webpack:///./src/views/mainUpload/MainMiddleUpload.vue?5a3c","webpack:///./src/views/mainUpload/MainMiddleUpload.vue","webpack:///./src/eventBus/eventBus.js","webpack:///./src/views/mainUpload/MainMiddleUpload.vue?0403"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","protrait","_v","_s","username","directives","name","rawName","value","expression","modifiers","ref","domProps","on","$event","textareaValue","target","trim","sendWeiboDataWhenTextareaChange","$forceUpdate","_l","item","key","imgId","moveLeft","arrowLeftMouseEnter","arrowLeftMouseLeave","moveRight","arrowRightMouseEnter","arrowRightMouseLeave","uploadImg","scalePic","imgMouseEnter","imgMouseLeave","uploadImgFile","refInFor","removeImgFile","crossMouseEnter","crossMouseLeave","staticRenderFns","_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","data","picsDataList","imgFlag","imgInitialId","hasSaveFlag","hasContentChangeFlag","watch","methods","e","plugins","getDataList","textarea","eventBus","id","tempArr","length","dataList","firstFlag","every","reader","lengthOfPicsDataList","some","$set","push","obj","index","created","activated","$refs","myTextarea","focus","usernameFromSession","Object","keys","JSON","protraitFromLocal","parse","localStorage","beforeRouteLeave","to","from","next","splice","a","component","Vue"],"mappings":"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","file":"js/chunk-ef5a6fac.b9b8029d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mainmiddleupload\"},[_c('div',{staticClass:\"upload\"},[_c('div',{staticClass:\"upload-header\"},[_c('div',{staticClass:\"upload-header-protrait\"},[_c('img',{attrs:{\"src\":_vm.protrait,\"alt\":\"网络错误，无法显示图片！\"}})]),_c('div',{staticClass:\"upload-header-username\"},[_vm._v(_vm._s(_vm.username))])]),_c('div',{staticClass:\"upload-body\"},[_c('div',{staticClass:\"upload-body-contents\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model.trim.lazy\",value:(_vm.textareaValue),expression:\"textareaValue\",modifiers:{\"trim\":true,\"lazy\":true}}],ref:\"myTextarea\",attrs:{\"name\":\"uploadContents\",\"id\":\"upload-contents-area\",\"placeholder\":\"编辑你的微博吧！\"},domProps:{\"value\":(_vm.textareaValue)},on:{\"change\":[function($event){_vm.textareaValue=$event.target.value.trim()},_vm.sendWeiboDataWhenTextareaChange],\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{ref:\"myUploadBodyPics\",staticClass:\"upload-body-pics\"},_vm._l((_vm.picsDataList),function(item){return _c('div',{key:item.imgId,staticClass:\"upload-body-pics-num\"},[_c('div',{staticClass:\"icon-arrow-left2\",on:{\"click\":function($event){return _vm.moveLeft(item.imgId)},\"mouseenter\":function($event){return _vm.arrowLeftMouseEnter($event)},\"mouseleave\":function($event){return _vm.arrowLeftMouseLeave($event)}}}),_c('div',{staticClass:\"icon-arrow-right2\",on:{\"click\":function($event){return _vm.moveRight(item.imgId)},\"mouseenter\":function($event){return _vm.arrowRightMouseEnter($event)},\"mouseleave\":function($event){return _vm.arrowRightMouseLeave($event)}}}),_c('img',{attrs:{\"src\":item.uploadImg,\"alt\":\"网络错误，无法显示图片！\",\"data-flag\":(\"\" + (item.imgFlag))},on:{\"click\":function($event){return _vm.scalePic($event)},\"mouseenter\":function($event){return _vm.imgMouseEnter($event)},\"mouseleave\":function($event){return _vm.imgMouseLeave($event)}}}),_c('input',{attrs:{\"type\":\"file\",\"name\":\"uploadPic\",\"id\":\"uploadPic\"},on:{\"change\":function($event){return _vm.uploadImgFile($event, item.imgId)}}}),_c('i',{ref:\"myIcon\",refInFor:true,staticClass:\"icon-cross\",on:{\"click\":function($event){return _vm.removeImgFile($event, item.imgId)},\"mouseenter\":function($event){return _vm.crossMouseEnter($event)},\"mouseleave\":function($event){return _vm.crossMouseLeave($event)}}})])}),0)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","<template>\n  <div class=\"mainmiddleupload\">\n    <div class=\"upload\">\n      <div class=\"upload-header\">\n        <div class=\"upload-header-protrait\">\n          <img :src=\"protrait\" alt=\"网络错误，无法显示图片！\" />\n        </div>\n        <div class=\"upload-header-username\">{{ username }}</div>\n      </div>\n      <div class=\"upload-body\">\n        <div class=\"upload-body-contents\">\n          <textarea\n            name=\"uploadContents\"\n            id=\"upload-contents-area\"\n            placeholder=\"编辑你的微博吧！\"\n            v-model.trim.lazy=\"textareaValue\"\n            ref=\"myTextarea\"\n            @change=\"sendWeiboDataWhenTextareaChange\"\n          ></textarea>\n        </div>\n        <div class=\"upload-body-pics\" ref=\"myUploadBodyPics\">\n          <div\n            class=\"upload-body-pics-num\"\n            v-for=\"item in picsDataList\"\n            :key=\"item.imgId\"\n          >\n            <div\n              class=\"icon-arrow-left2\"\n              @click=\"moveLeft(item.imgId)\"\n              @mouseenter=\"arrowLeftMouseEnter($event)\"\n              @mouseleave=\"arrowLeftMouseLeave($event)\"\n            ></div>\n            <div\n              class=\"icon-arrow-right2\"\n              @click=\"moveRight(item.imgId)\"\n              @mouseenter=\"arrowRightMouseEnter($event)\"\n              @mouseleave=\"arrowRightMouseLeave($event)\"\n            ></div>\n            <img\n              :src=\"item.uploadImg\"\n              alt=\"网络错误，无法显示图片！\"\n              :data-flag=\"`${item.imgFlag}`\"\n              @click=\"scalePic($event)\"\n              @mouseenter=\"imgMouseEnter($event)\"\n              @mouseleave=\"imgMouseLeave($event)\"\n            />\n            <input\n              type=\"file\"\n              name=\"uploadPic\"\n              id=\"uploadPic\"\n              @change=\"uploadImgFile($event, item.imgId)\"\n            />\n            <i\n              class=\"icon-cross\"\n              ref=\"myIcon\"\n              @click=\"removeImgFile($event, item.imgId)\"\n              @mouseenter=\"crossMouseEnter($event)\"\n              @mouseleave=\"crossMouseLeave($event)\"\n            ></i>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { plugins } from '@/api/plugins.js';\nimport { eventBus } from '@/eventBus/eventBus.js';\n\nexport default {\n  name: 'MainMiddleUpload',\n  data() {\n    return {\n      username: '',\n      protrait: '',\n      textareaValue: '',\n      picsDataList: [{ uploadImg: '', imgFlag: false, imgId: 1 }], // 存放图片信息的数组\n      imgInitialId: 1, // 图片id初始值\n      hasSaveFlag: true, // 判断页面信息是否需要保存\n      hasContentChangeFlag: false // 判断页面信息是否被用户修改\n    };\n  },\n  watch: {\n    // 监听 textareaValue 是否被用户修改\n    textareaValue() {\n      this.hasContentChangeFlag = true;\n    },\n    picsDataList() {\n      this.hasContentChangeFlag = true;\n    }\n  },\n  methods: {\n    // 划入 arrowLeft icon 时\n    arrowLeftMouseEnter(e) {\n      e.target.style.color = '#ff8200';\n      e.target.nextSibling.nextSibling.style.border = '1px solid #ff8200';\n    },\n    // 划出 arrowLeft icon 时\n    arrowLeftMouseLeave(e) {\n      e.target.style.color = '';\n      e.target.nextSibling.nextSibling.style.border = '';\n    },\n    // 划入 arrowRight icon 时\n    arrowRightMouseEnter(e) {\n      e.target.style.color = '#ff8200';\n      e.target.nextSibling.style.border = '1px solid #ff8200';\n    },\n    // 划出 arrowRight icon 时\n    arrowRightMouseLeave(e) {\n      e.target.style.color = '';\n      e.target.nextSibling.style.border = '';\n    },\n    // 划入图片时\n    imgMouseEnter(e) {\n      e.target.style.border = '1px solid #ff8200';\n    },\n    // 划出图片时\n    imgMouseLeave(e) {\n      e.target.style.border = '';\n    },\n    // 划入 cross icon 时\n    crossMouseEnter(e) {\n      e.target.style.color = '#ff8200';\n      e.target.previousSibling.previousSibling.style.border =\n        '1px solid #ff8200';\n    },\n    // 划出 cross icon 时\n    crossMouseLeave(e) {\n      e.target.style.color = '';\n      e.target.previousSibling.previousSibling.style.border = '';\n    },\n    // 放大图片\n    scalePic(e) {\n      plugins.scalePic(e); // 插件\n      e.target.style.display = 'block'; // 变小后显示图片 不让他隐藏\n    },\n    // 整合发送给 MainLeftUpload.vue 的微博信息\n    getDataList() {\n      let dataList = {\n        textarea: this.textareaValue,\n        picsDataList: this.picsDataList\n      };\n      eventBus.$emit('sendWeiboDataList', dataList);\n    },\n    // textarea 改变时 把微博信息发送给 MainLeftUpload.vue\n    sendWeiboDataWhenTextareaChange() {\n      this.getDataList();\n    },\n    // 上传图片文件\n    uploadImgFile(e, id) {\n      // 每次添加图片时 判断之前是否发布过微博并且都是没有图片的 如果是则重制id\n      let tempArr = this.$store.state.MYWEIBO.weiboDataAll;\n      if (tempArr[tempArr.length - 1].dataList.firstFlag !== true) {\n        if (tempArr.every((item) => item.dataList.picsDataList.length === 0)) {\n          this.imgInitialId = 1; // 重制 imgInitialId 为 1\n        }\n      }\n      const imgFile = e.target.files[0];\n      const reader = new FileReader();\n      reader.readAsDataURL(imgFile);\n      reader.onload = (res) => {\n        this.picsDataList.some((item) => {\n          if (item.imgId === id) {\n            item.uploadImg = res.target.result; // 获取到上传图片的base64格式链接\n          }\n        });\n\n        e.target.style.display = 'none'; //上传图片文件隐藏\n        e.target.previousSibling.style.display = 'block'; // 图片显示\n        e.target.nextSibling.style.display = 'block'; // cross icon 显示\n        e.target.previousSibling.previousSibling.style.display = 'block'; // arrowLeft icon 显示\n        e.target.previousSibling.previousSibling.previousSibling.style.display =\n          'block'; // arrowRight icon 显示\n        let lengthOfPicsDataList = this.picsDataList.length; // 上传图片数量的总数\n        // 如果添加的是最后一张照片 则已经到最多照片数量 所以 return\n        if (lengthOfPicsDataList === 9) {\n          // 添加图片时 把微博信息发送给 MainLeftUpload.vue\n          this.getDataList();\n          return;\n        }\n        let obj = {\n          uploadImg: '',\n          imgFlag: false,\n          imgId: ++this.imgInitialId\n        };\n        this.picsDataList.push(obj); // 添加完一张照片后 准备添加后一张照片\n        this.getDataList(); // 添加图片时 把微博信息发送给 MainLeftUpload.vue\n      };\n    },\n    // 删除图片文件\n    removeImgFile(e, id) {\n      // 删除选中的那张照片\n      this.picsDataList.some((item, index) => {\n        if (item.imgId === id) {\n          this.picsDataList.splice(index, 1);\n        }\n      });\n      let lengthOfPicsDataList = this.picsDataList.length; // 上传图片数量的总数\n      // 当删除删到length为一时\n      if (lengthOfPicsDataList === 1) {\n        // 每次删除最后一个图片后 判断之前是否发布过微博并且都是没有图片的 如果是则重制id\n        let tempArr = this.$store.state.MYWEIBO.weiboDataAll;\n        if (tempArr[tempArr.length - 1].dataList.firstFlag !== true) {\n          if (\n            tempArr.every((item) => item.dataList.picsDataList.length === 0)\n          ) {\n            this.imgInitialId = 1; // 重制 imgInitialId 为 1\n            this.$set(this.picsDataList[0], 'imgId', 1); // 重制第一个 imgId 为 1\n          }\n        }\n        e.target.previousSibling.style.display = 'block'; // input：file显示\n        e.target.previousSibling.previousSibling.style.display = 'none'; // 图片隐藏\n        e.target.style.display = 'none'; // cross icon 隐藏\n        e.target.previousSibling.previousSibling.previousSibling.style.display =\n          'none'; // arrowLeft icon 隐藏\n        e.target.previousSibling.previousSibling.previousSibling.previousSibling.style.display =\n          'none'; // arrowRight icon 隐藏\n      }\n      if (\n        // 删除后 如果图片还剩下八张 并且 最后一张图片的值不为空时\n        lengthOfPicsDataList === 8 &&\n        this.picsDataList[this.picsDataList.length - 1].uploadImg !== ''\n      ) {\n        let obj = {\n          uploadImg: '',\n          imgFlag: false,\n          imgId: ++this.imgInitialId\n        };\n        this.picsDataList.push(obj); // 添加一个input：file 用来添加图片文件\n      }\n      this.getDataList(); // 删除图片时 把微博信息发送给 MainLeftUpload.vue\n    },\n    // 图片向左移动\n    moveLeft(id) {\n      this.picsDataList.some((item, index) => {\n        if (item.imgId === id) {\n          if (index === 0) {\n            return; // 如果图片位置在第一个 则无法再向左移动\n          } else {\n            this.picsDataList.splice(index, 1); // 删除这个图片\n            this.picsDataList.splice(index - 1, 0, item); // 把它添加到上一个图片前\n            this.getDataList(); // 左移图片时 把微博信息发送给 MainLeftUpload.vue\n          }\n        }\n      });\n    },\n    // 图片向右移动\n    moveRight(id) {\n      this.picsDataList.some((item, index) => {\n        if (item.imgId === id) {\n          if (index === 8) {\n            return;\n          } else {\n            if (this.picsDataList[index + 1].uploadImg === '') {\n              return;\n            } else {\n              /* \n                唯一有效方法，使用和向左移一样的方法splice会有奇怪不知名的bug，\n                例如删除这个item图片后（this.picsDataList.splice(index, 1)），\n                再在item后一个元素后面添加时（ this.picsDataList.splice(index - 1, 0, item)），\n                不会添加在其后面，反而是添加到了array的最后 与最后一个元素交换了位置，\n                代码逻辑完全正确，测试简单相关splice小demo后 splice方法完全可行，\n                但到了vue里，就出现了上述bug，目前只有用如下方法可解决。\n                如下方法为：利用创建新数组，不断push进去 实现深拷贝。\n                其余深拷贝法，例如使用，结构方式展开运算符 {...arr} 无法实现。\n               */\n              let a = this.picsDataList.splice(0, index); // 删除这个item之前的\n              let b = this.picsDataList.splice(0, 1); // 删除这个item\n              let c = this.picsDataList.splice(0, 1); // 删除这个item的后一个\n              let d = this.picsDataList.splice(0, this.picsDataList.length - 1); // 删除后一个到倒数第二个\n              let e = this.picsDataList.splice(-1); // 最后一个空item\n              let arr = []; // 创建一个新数组 把上面push进去\n              arr.push(...a);\n              arr.push(...c);\n              arr.push(...b);\n              arr.push(...d);\n              arr.push(...e);\n              this.picsDataList = arr; // 再赋值给原来数组\n              this.getDataList(); // 右移图片时 把微博信息发送给 MainLeftUpload.vue\n            }\n          }\n        }\n      });\n    }\n  },\n\n  created() {\n    // from MainLeftUpload.vue 当点击发布微博是 要清除页面信息\n    eventBus.$off('getPostFlag');\n    eventBus.$on('getPostFlag', (value) => {\n      this.hasSaveFlag = value;\n    });\n  },\n\n  activated() {\n    /* \n      每次发布微博后需要清除信息和每次不保存页面清除信息后，需要将 hasContentChangeFlag 的值改为false。\n      因为每次在清除页面时，这些数据都会被watch所监听到，监听信息是否改变，而这个监听是在路由跳转完毕后才会监听到的。\n      我们不能在路由跳转之后去把 hasContentChangeFlag 的值回调，这个过程在监听的前面。\n      所以我们必须在每次重新激活这个页面的时候，再去把 hasContentChangeFlag 的值改为 false。\n    */\n    this.hasContentChangeFlag = false;\n    // 每次router激活时时 把微博信息发送给 MainLeftUpload.vue\n    this.getDataList();\n    // 自动 focus textarea\n    this.$refs.myTextarea.focus();\n    // 获取用户名和头像\n    var usernameFromSession = Object.keys(\n      JSON.parse(JSON.stringify(sessionStorage))\n    )[0];\n    var protraitFromLocal = JSON.parse(\n      localStorage.getItem(usernameFromSession)\n    ).protrait;\n    this.username = usernameFromSession;\n    this.protrait = protraitFromLocal;\n  },\n  beforeRouteLeave(to, from, next) {\n    // 在离开路由前 判断用户是用什么方式离开页面的 判断用户是否点击了发布微博的按钮 如果为false 则清除页面信息 然后放行\n    if (this.hasSaveFlag === false) {\n      this.textareaValue = '';\n      this.picsDataList.splice(0, this.picsDataList.length - 1);\n      this.hasSaveFlag = true;\n      next();\n    } else {\n      // 如果用户没有点击发布微博按钮 则判断用户是否修改了页面的信息 如果为false 说明没有改动 之间放行\n      if (this.hasContentChangeFlag === false) {\n        next();\n      } else {\n        // 如果用户修改了页面 则在路由跳转前 提醒用户 是否需要保存刚刚的修改\n        let a = confirm('是否要保存草稿?');\n        if (a) {\n          next(); // 点击是 放行\n        } else {\n          this.textareaValue = '';\n          this.picsDataList.splice(0, this.picsDataList.length - 1);\n          next(); // 点击否 清楚页面信息 然后放行\n        }\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.upload {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  border: 1px solid #222;\n  border-radius: 8px;\n  background-color: #16161a;\n  .upload-header {\n    display: flex;\n    align-items: center;\n    padding: 15px 25px;\n    .upload-header-protrait {\n      width: 50px;\n      height: 50px;\n      border-radius: 50%;\n      overflow: hidden;\n      img {\n        display: inline-block;\n        width: 100%;\n        height: 100%;\n        background-color: #333;\n        border-radius: 50%;\n      }\n    }\n    .upload-header-username {\n      padding-left: 10px;\n    }\n  }\n  .upload-body {\n    display: flex;\n    flex-direction: column;\n    padding: 10px 20px 60px 70px;\n    .upload-body-contents {\n      textarea {\n        width: 100%;\n        height: 100px;\n        resize: none;\n        margin: 0;\n        background-color: #16161a;\n        color: #ff8200; // 光标的颜色\n        text-shadow: 0px 0px 0px #eee; // 文本颜色\n        -webkit-text-fill-color: transparent; // 把原本的文字颜色设置为透明\n      }\n    }\n    .upload-body-pics {\n      display: flex;\n      flex-wrap: wrap;\n      .upload-body-pics-num {\n        position: relative;\n        width: 150px;\n        height: 150px;\n        border-radius: 8px;\n        &:not(:nth-child(3n)) {\n          margin-right: 6px;\n        }\n        &:nth-child(n) {\n          margin-bottom: 50px;\n        }\n        .icon-arrow-left2,\n        .icon-arrow-right2 {\n          position: absolute;\n          bottom: -30px;\n          display: none;\n          cursor: pointer;\n        }\n        .icon-arrow-left2 {\n          left: 35px;\n        }\n        .icon-arrow-right2 {\n          right: 35px;\n        }\n        .icon-arrow-left2:before {\n          content: '\\ea40';\n        }\n        .icon-arrow-right2:before {\n          content: '\\ea3c';\n        }\n        img {\n          position: relative;\n          display: none;\n          width: 100%;\n          height: 100%;\n          cursor: pointer;\n          border: 1px solid #333;\n          border-radius: 8px;\n        }\n        #uploadPic {\n          // display: none;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 150px;\n          height: 150px;\n          border-radius: 8px;\n          border: 1px solid #333;\n          color: #000;\n          background: url('../../assets/images/addImgFile.webp') center/100%\n            no-repeat;\n          &:hover {\n            border: 1px solid #ff8200;\n          }\n        }\n        i {\n          position: absolute;\n          top: 160px;\n          left: 70px;\n          display: none;\n          line-height: 25px;\n          text-align: center;\n          font-size: 12px;\n          border-radius: 50%;\n          cursor: pointer;\n        }\n\n        .icon-cross:before {\n          content: '\\ea0f';\n        }\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainMiddleUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainMiddleUpload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainMiddleUpload.vue?vue&type=template&id=2350346e&scoped=true&\"\nimport script from \"./MainMiddleUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./MainMiddleUpload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MainMiddleUpload.vue?vue&type=style&index=0&id=2350346e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2350346e\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nexport const eventBus = new Vue();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainMiddleUpload.vue?vue&type=style&index=0&id=2350346e&lang=less&scoped=true&\""],"sourceRoot":""}